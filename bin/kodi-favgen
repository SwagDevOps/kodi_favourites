#!/usr/bin/env ruby
# frozen_string_literal: true

require('pathname')

Pathname.new(__FILE__).realpath.dirname.join('..').realpath.then do |path|
  require_relative("#{path.join('ruby/kodi_fav_gen/lib/kodi_fav_gen')}").then do
    {
      path: path.join('favourites').realpath.to_s,
      tmpdir: path.join('cache').expand_path.to_s,
    }.tap { |defaults| KodiFavGen::App.call(ARGV, defaults) }
  end
end
